<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kraken Trading Bot - Clean Version</title>
    <!-- 
    Copyright (c) 2025 Trading Bot AI
    All rights reserved.
    
    This software is proprietary and confidential. Unauthorized copying, 
    distribution, or use of this software, via any medium, is strictly prohibited.
    
    For licensing inquiries, contact: licensing@tradingbotai.com
    -->
    <!-- Lightweight Charts CDN loaded first -->
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <!-- Fallback CDN if unpkg fails -->
    <script>
        if (typeof window.LightweightCharts === 'undefined') {
            document.write('<script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"><\/script>');
        }
    </script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üöÄ Kraken Trading Bot</h1>
            <p>Real-Time Market Data & AI Trading</p>
            <div class="status-row">
                <span>API Status:</span>
                <span class="status-indicator" id="apiStatus"></span>
                <span id="apiStatusText">Connecting...</span>
                <span>Trading:</span>
                <span class="status-indicator" id="tradingStatus"></span>
                <span id="tradingStatusText">Stopped</span>
                <span>Latency:</span>
                <span id="latencyStatus">-- ms</span>
            </div>
        </header>

        <!-- Notifications -->
        <div id="notification" class="notification" style="display: none;"></div>

        <!-- Balance Display -->
        <div class="balance-card">
            <div class="balance-value" id="accountBalance">¬£0.00</div>
            <div class="balance-label" id="balanceLabel">Live Account</div>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalPnL">¬£0.00</div>
                <div class="stat-label">Total P&L</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="todayPnL">¬£0.00</div>
                <div class="stat-label">Today P&L</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalTrades">0</div>
                <div class="stat-label">Total Trades</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="winRate">0%</div>
                <div class="stat-label">Win Rate</div>
            </div>
        </div>

        <!-- Configuration -->
        <section class="config-section">
            <h3>‚öôÔ∏è Trading Configuration</h3>
            
            <!-- Market Type -->
            <div class="input-group">
                <label for="marketType">Market Type</label>
                <select id="marketType" onchange="toggleMarketType()">
                    <option value="crypto">Cryptocurrency (Kraken)</option>
                    <option value="stocks">Stocks (Yahoo Finance)</option>
                </select>
            </div>

            <!-- Trading Mode -->
            <div class="input-group">
                <label for="tradingMode">Trading Mode</label>
                <select id="tradingMode" onchange="toggleTradingMode()">
                    <option value="demo">Paper Trading (Real Data)</option>
                    <option value="live">Live Trading (Real Money)</option>
                </select>
            </div>

            <!-- API Credentials (Live Mode Only) -->
            <div id="apiSection" class="api-section" style="display: none;">
                <h4>üîê Kraken API Credentials</h4>
                <div class="api-grid">
                    <div class="input-group">
                        <label for="apiKey">API Key</label>
                        <input type="password" id="apiKey" placeholder="Enter your Kraken API key">
                    </div>
                    <div class="input-group">
                        <label for="apiSecret">API Secret</label>
                        <input type="password" id="apiSecret" placeholder="Enter your Kraken API secret">
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="testApiConnection()">Test Connection</button>
            </div>

            <!-- Trading Parameters -->
            <div class="params-grid">
                <div class="input-group">
                    <label for="maxInvestment">Max Investment (¬£)</label>
                    <input type="number" id="maxInvestment" value="50" min="10" max="1000">
                </div>
                <div class="input-group">
                    <label for="takeProfit">Take Profit (%)</label>
                    <input type="number" id="takeProfit" value="30" min="0.1" max="100" step="0.1">
                </div>
                <div class="input-group">
                    <label for="stopLoss">Stop Loss (%)</label>
                    <input type="number" id="stopLoss" value="10" min="0.1" max="50" step="0.1">
                </div>
                <div class="input-group">
                    <label for="tradeFrequency">Trade Frequency</label>
                    <select id="tradeFrequency">
                        <option value="conservative">Conservative</option>
                        <option value="moderate" selected>Moderate</option>
                        <option value="aggressive">Aggressive</option>
                    </select>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="control-buttons">
                <button class="btn btn-success" onclick="startTrading()" id="startBtn">Start Trading</button>
                <button class="btn btn-danger" onclick="stopTrading()" id="stopBtn" disabled>Stop Trading</button>
                <button class="btn btn-primary" onclick="refreshData()">Refresh Data</button>
                <button class="btn btn-danger" onclick="setManualStopLoss()">Set Stop Loss</button>
            </div>
        </section>

        <!-- Chart Section -->
        <section class="chart-section">
            <div class="chart-header">
                <h3>üìà Price Chart</h3>
                <div class="chart-controls">
                    <div class="pair-selector">
                        <button class="pair-btn active" onclick="selectPair('BTCGBP')">BTC/GBP</button>
                        <button class="pair-btn" onclick="selectPair('XRPGBP')">XRP/GBP</button>
                        <button class="pair-btn" onclick="selectPair('XLMGBP')">XLM/GBP</button>
                        <button class="pair-btn" onclick="selectPair('LINKGBP')">LINK/GBP</button>
                        <button class="pair-btn" onclick="selectPair('AAVEGBP')">AAVE/GBP</button>
                        <button class="pair-btn" onclick="selectPair('FILGBP')">FIL/GBP</button>
                    </div>
                    <div class="chart-type-selector">
                        <button class="type-btn active" onclick="setChartType('line')">Line</button>
                        <button class="type-btn" onclick="setChartType('candlestick')">Candles</button>
                    </div>
                    <div class="time-range-selector">
                        <button class="time-btn active" onclick="setTimeRange('15m')">15m</button>
                        <button class="time-btn" onclick="setTimeRange('30m')">30m</button>
                        <button class="time-btn" onclick="setTimeRange('1h')">1h</button>
                        <button class="time-btn" onclick="setTimeRange('3h')">3h</button>
                        <button class="time-btn" onclick="setTimeRange('6h')">6h</button>
                        <button class="time-btn" onclick="setTimeRange('24h')">24h</button>
                        <button class="time-btn" onclick="setTimeRange('1w')">1w</button>
                    </div>
                </div>
            </div>
            <div class="chart-container">
                <div id="priceChart" style="height:400px;"></div>
            </div>
        </section>

        <!-- Trading Pairs: Crypto -->
        <section class="pairs-section">
            <h3>üí± Crypto Pairs</h3>
            <div class="pairs-grid" id="cryptoPairsGrid"></div>
        </section>

        <!-- Trading Pairs: Stocks -->
        <section class="pairs-section">
            <h3>üìà Stocks</h3>
            <div class="pairs-grid" id="stockPairsGrid"></div>
        </section>

        <!-- Active Trades -->
        <section class="trades-section">
            <h3>üîÑ Active Trades</h3>
            <div id="activeTradesList" class="trades-list">
                <div class="empty-state">No active trades</div>
            </div>
        </section>

        <!-- Trading Log -->
        <section class="log-section">
            <h3>üìä Trading Log</h3>
            <div id="tradingLog" class="log-container"></div>
        </section>

        <!-- Debug Log -->
        <section class="debug-section">
            <h3>üîß Debug Console</h3>
            <div class="debug-controls">
                <button class="btn btn-secondary" onclick="clearDebugLog()">Clear Log</button>
                <button class="btn btn-secondary" onclick="toggleDebugLog()">Toggle Auto-Scroll</button>
                <span class="debug-status" id="debugStatus">Auto-scroll: ON</span>
            </div>
            <div id="debugLog" class="debug-container"></div>
        </section>
    </div>
    <!-- App scripts loaded after chart library -->
    <script src="kraken-api.js"></script>
    <script src="stock-api.js"></script>
    <script src="trading-bot.js"></script>
    <script src="app.js"></script>
</body>
</html> 